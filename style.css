@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap');
:root{--green:#4A7A30;--green-l:#AAFFAA;--green-d:#1A3A1A;--gold:#FFD700;--orange:#FF9A3C;--red:#FF4444;--gray:#666;}
*{margin:0;padding:0;box-sizing:border-box;}
body{background:#000;display:flex;align-items:center;justify-content:center;min-height:100vh;font-family:'VT323',monospace;overflow:hidden;user-select:none;}
.screen{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:200;}
.screen.active{display:flex;}
/* INTRO */
#introScreen{background:radial-gradient(ellipse at center,#0A1A0A 0%,#000 70%);flex-direction:column;overflow-y:auto;padding:20px 10px;}
.ibg{position:fixed;inset:0;opacity:.04;pointer-events:none;background-image:repeating-linear-gradient(0deg,#4A7A30 0,transparent 1px,transparent 47px,#4A7A30 48px),repeating-linear-gradient(90deg,#4A7A30 0,transparent 1px,transparent 47px,#4A7A30 48px);background-size:48px 48px;}
.iwrap{position:relative;display:flex;flex-direction:column;align-items:center;gap:14px;max-width:660px;width:100%;text-align:center;}
.ilogo{font-family:'Press Start 2P',monospace;font-size:clamp(18px,4vw,32px);color:var(--gold);text-shadow:0 0 30px #AA8800,0 4px 0 #5A4000;line-height:1.5;animation:glow 3s ease-in-out infinite;}
@keyframes glow{0%,100%{text-shadow:0 0 20px #AA8800,0 4px 0 #5A4000;}50%{text-shadow:0 0 50px #FFD700,0 4px 0 #5A4000;}}
.irat{font-size:56px;animation:bob 1.5s ease-in-out infinite;}
@keyframes bob{0%,100%{transform:translateY(0);}50%{transform:translateY(-10px);}}
.itag{font-size:17px;color:var(--green-l);letter-spacing:2px;}
.card{background:rgba(8,20,8,0.93);border:1.5px solid var(--green);border-radius:10px;padding:14px 18px;width:100%;text-align:left;}
.ct{color:var(--gold);font-size:11px;letter-spacing:2px;margin-bottom:10px;}
.card p{color:#CCC;font-size:15px;line-height:1.7;}
.hl{color:var(--gold);} .dng{color:var(--red);}
.mslist{display:flex;flex-direction:column;gap:8px;}
.msitem{display:flex;align-items:flex-start;gap:10px;color:#999;font-size:15px;line-height:1.4;}
.msnum{background:var(--green);color:#fff;width:22px;height:22px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:11px;flex-shrink:0;margin-top:2px;}
.cgrid{display:grid;grid-template-columns:1fr 1fr;gap:8px;font-size:15px;color:#AAA;}
.cgrid .k{color:var(--gold);}
.mlabel{color:var(--gold);font-size:14px;letter-spacing:3px;}
.mrow{display:flex;gap:14px;flex-wrap:wrap;justify-content:center;}
.mbtn{background:var(--green-d);border:2px solid var(--green);color:var(--green-l);font-family:'VT323',monospace;font-size:18px;padding:16px 32px;border-radius:10px;cursor:pointer;transition:all .2s;display:flex;flex-direction:column;align-items:center;gap:6px;min-width:150px;}
.mbtn:hover{background:#2A5A2A;color:#fff;transform:translateY(-4px);box-shadow:0 8px 24px rgba(74,122,48,.5);}
.mbtn .mi{font-size:36px;} .mbtn .ms{font-size:12px;color:#666;}
/* GAME */
#gameScreen{background:#000;}
#gw{position:relative;width:900px;height:600px;overflow:hidden;border:2px solid #111;}
body.mobile #gw{width:100vw;height:100vh;border:none;}
#gc{display:block;width:100%;height:calc(100% - 88px);margin-top:44px;}
body.mobile #gc{height:calc(100% - 96px);}
/* HUD TOP */
#hud{position:absolute;top:0;left:0;right:0;height:44px;background:rgba(3,3,3,.97);border-bottom:2px solid var(--green);display:flex;align-items:center;padding:0 10px;gap:8px;z-index:20;}
#htitle{font-family:'Press Start 2P',monospace;color:var(--gold);font-size:9px;flex-shrink:0;white-space:nowrap;}
#htimer{background:#150A00;border:1.5px solid var(--orange);border-radius:6px;padding:2px 10px;color:var(--orange);font-size:18px;margin:0 auto;white-space:nowrap;}
#htimer.urgent{border-color:var(--red);color:var(--red);animation:pulse .8s infinite;}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.4}}
#hmission{font-size:13px;color:var(--green-l);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:200px;flex-shrink:0;}
#harea{font-size:13px;color:var(--gray);white-space:nowrap;flex-shrink:0;}
/* MISSION PANEL */
#mp{position:absolute;top:52px;left:10px;width:185px;background:rgba(5,5,5,.94);border:1.5px solid #1A3A1A;border-radius:8px;padding:8px 10px;z-index:15;}
#mp h4{color:var(--gold);font-size:10px;letter-spacing:1px;margin-bottom:6px;padding-bottom:5px;border-bottom:1px solid #111;}
.msp{display:flex;align-items:flex-start;gap:7px;padding:3px 0;color:#333;font-size:13px;line-height:1.3;}
.msp.act{color:var(--green-l);}  .msp.dn{color:#2A3A2A;text-decoration:line-through;}
.msi{font-size:11px;flex-shrink:0;margin-top:2px;}
/* HUD BOTTOM */
#bh{position:absolute;bottom:0;left:0;right:0;height:44px;background:rgba(3,3,3,.97);border-top:2px solid #1A3A1A;display:flex;align-items:center;padding:0 10px;gap:6px;z-index:20;}
body.mobile #bh{height:52px;}
#ilabel{color:var(--gray);font-size:12px;white-space:nowrap;flex-shrink:0;}
body.mobile #ilabel{display:none;}
#islots{display:flex;gap:4px;}
.isl{width:54px;height:32px;border-radius:5px;border:1px solid #111;background:#060606;display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:9px;color:#222;position:relative;}
body.mobile .isl{width:46px;height:38px;}
.isl.has{border-color:#2A4A2A;background:#080F08;}
.isl.has img{width:22px;height:22px;object-fit:contain;}
.isl .iln{font-size:8px;color:#3A5A3A;position:absolute;bottom:1px;left:0;right:0;text-align:center;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:0 2px;}
#pcc{margin-left:auto;display:flex;gap:10px;font-size:13px;color:var(--gray);}
body.mobile #pcc{display:none;}
#pcc span{color:#AAA;}
/* MINIMAP */
#mm{position:absolute;top:52px;right:10px;width:130px;height:130px;background:rgba(5,5,5,.96);border:1.5px solid #222;border-radius:7px;z-index:15;overflow:hidden;}
#mmc{display:block;}
#mml{position:absolute;top:2px;left:0;right:0;text-align:center;color:#2A2A2A;font-size:8px;letter-spacing:1px;pointer-events:none;}
/* DIALOG */
#dlg{position:absolute;bottom:52px;left:10px;right:10px;background:rgba(5,5,5,.98);border:2px solid var(--green);border-radius:10px;padding:10px 12px;z-index:30;display:none;box-shadow:0 0 30px rgba(74,122,48,.25);}
#dh{display:flex;align-items:center;gap:10px;margin-bottom:8px;}
#dav{width:50px;height:50px;object-fit:contain;border-radius:7px;border:1.5px solid var(--green);background:#0A1A0A;padding:3px;flex-shrink:0;}
#dname{background:var(--green);color:#fff;font-size:16px;padding:4px 12px;border-radius:5px;font-weight:bold;}
#dtxt{color:#DDD;font-size:17px;line-height:1.55;font-style:italic;margin-bottom:10px;}
#dchoices{display:flex;gap:8px;flex-wrap:wrap;}
.dc{background:var(--green-d);border:1.5px solid var(--green);color:var(--green-l);font-family:'VT323',monospace;font-size:16px;padding:5px 14px;border-radius:6px;cursor:pointer;transition:all .15s;}
.dc:hover{background:#2A5A2A;color:#fff;}
.dc.neu{background:#0A0A0A;border-color:#1A1A1A;color:#333;}
.dc.neu:hover{border-color:#333;color:#777;}
.dc.lk{background:#1A0808;border-color:#2A0808;color:#2A0808;cursor:not-allowed;}
/* NOTIF */
#notif{position:absolute;top:52px;left:50%;transform:translateX(-50%);background:rgba(6,18,6,.97);border:2px solid var(--green);border-radius:10px;padding:8px 16px 8px 10px;z-index:40;display:none;align-items:center;gap:10px;min-width:240px;animation:sld .3s ease;}
@keyframes sld{from{transform:translateX(-50%) translateY(-20px);opacity:0;}to{transform:translateX(-50%) translateY(0);opacity:1;}}
#notif img{width:34px;height:34px;object-fit:contain;border-radius:4px;background:#0A1A0A;padding:2px;flex-shrink:0;}
#ntitle{font-size:15px;color:var(--green-l);font-weight:bold;}
#nsub{font-size:13px;color:var(--gray);}
/* OVERLAY */
#ov{position:absolute;inset:0;background:rgba(0,0,0,.9);z-index:50;display:none;flex-direction:column;align-items:center;justify-content:center;gap:16px;}
#ovt{font-family:'Press Start 2P',monospace;font-size:22px;color:var(--gold);text-shadow:0 0 20px #AA8800;text-align:center;line-height:1.5;}
#ovs{font-size:18px;color:#777;text-align:center;max-width:480px;line-height:1.5;}
#ovb{display:flex;gap:12px;flex-wrap:wrap;justify-content:center;}
.ob{background:var(--green-d);border:2px solid var(--green);color:var(--green-l);font-family:'VT323',monospace;font-size:18px;padding:10px 28px;border-radius:8px;cursor:pointer;transition:all .2s;letter-spacing:1px;}
.ob:hover{background:#2A5A2A;color:#fff;transform:scale(1.04);}
.ob.red{background:#2A0808;border-color:#6A1818;color:#FFAAAA;}
.ob.red:hover{background:#4A1818;}
/* ALERT */
#ab{position:absolute;inset:0;pointer-events:none;z-index:18;border:5px solid transparent;}
#ab.on{border-color:rgba(255,40,40,.75);animation:af .5s infinite;}
@keyframes af{0%,100%{border-color:rgba(255,40,40,.75);}50%{border-color:rgba(255,40,40,.1);}}
/* MOBILE CTRL */
#mctrl{position:absolute;inset:0;pointer-events:none;z-index:25;display:none;}
body.mobile #mctrl{display:block;}
#dpad{position:absolute;bottom:104px;left:16px;width:132px;height:132px;pointer-events:all;}
.dpb{position:absolute;width:44px;height:44px;background:rgba(18,45,18,.88);border:2px solid var(--green);border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:22px;color:var(--green-l);cursor:pointer;touch-action:none;-webkit-tap-highlight-color:transparent;transition:background .1s;}
.dpb:active,.dpb.p{background:rgba(74,122,48,.75);color:#fff;}
#dpu{top:0;left:44px;} #dpd{bottom:0;left:44px;} #dpl{top:44px;left:0;} #dpr{top:44px;right:0;}
#dpc{position:absolute;top:44px;left:44px;width:44px;height:44px;background:rgba(8,25,8,.5);border:1px solid #1A3A1A;border-radius:6px;}
#abtns{position:absolute;bottom:104px;right:16px;display:flex;flex-direction:column;gap:8px;pointer-events:all;}
.abtn{width:62px;height:44px;background:rgba(18,45,18,.88);border:2px solid var(--green);border-radius:8px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;font-size:10px;color:var(--green-l);cursor:pointer;touch-action:none;-webkit-tap-highlight-color:transparent;}
.abtn:active{background:rgba(74,122,48,.75);color:#fff;}
.abtn .ai{font-size:18px;}
